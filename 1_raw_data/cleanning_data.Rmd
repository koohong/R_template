---
title: "Clenaing Data"
author: "Seongjeong Woo, Koohong Chung "
date: \today
output: 
  html_document:
    toc: true
    toc_depth: 3
    toc_float: 
      collapsed: false
      smooth_scroll: false
      number_sections: true
      fig_caption: TRUE
editor_options: 
  chunk_output_type: console
---

```{css, echo = FALSE}
#TOC {
  position: fixed;
  left: 30px;
  width: 400px;
  max-width:120%;
  overflow:auto;
}

h1.title{
  color: navy;
}

h1 {
  color: blue;
}

h2 {
  color: green;
}

h3 {
  color: orange;
}
```

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = TRUE)

source("~/GitHub/R_template/1_raw_data/get_lib.R")
```

# Read data

## accident_2016_2020.rds

```{r}
df_accident <- readRDS("~/GitHub/R_template/1_raw_data/accident_2016_2020.rds")

glimpse(df_accident)
(unique(df_accident$road_type))

df_accident %>% group_by(states,severity) %>% summarise(n=n()) 
             
```

- `date` convert to `date` format. `year-month-date`, `luberdate`
- `violation` reproted by police officer 
- create stacked bar graph (state & severity) (state & vehicle type)

## population_by_age_2016

```{r}
df_age <- readRDS("~/GitHub/R_template/1_raw_data/population_by_age_2016.rds")
glimpse(df_age)
unique(df_age$district)

colnames(df_age)

df_age$`2016` <- as.integer(df_age$`2016`)

plot(ecdf(df_age$`2016`))

temp <- df_age %>% filter(contents == "total") 
plot(ecdf(temp$`2016`))
```

- how should we group subdistricts, clustering
- geom_bar, show age distribution

## road_width_2016

- You need to combine this table, `df_road` with `df_age`

```{r}
df_road <- readRDS("~/GitHub/R_template/1_raw_data/road_width_2016.rds")

glimpse(df_road)
```

## use_districut_2016_2020

- need to combine this one as well

```{r}
df_zone <- readRDS("~/GitHub/R_template/1_raw_data/use_district_2016_2020.rds")
glimpse(df_zone)
```

## emergency_medical_2016_rvsd.rds

```{r}
df_medical <- readRDS("~/GitHub/R_template/1_raw_data/emergency_medical_2016-rvsd.rds")

glimpse(df_medical)
```

- Need to confirm when, where and by whom the accident serverity is determined
- then, save the clean data under `2_clean_data`

